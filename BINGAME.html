<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‡πÄ‡∏Å‡∏°‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ñ‡∏±‡∏á</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Mobile optimizations */
        @media (max-width: 768px) {
            body {
                padding: 8px;
                font-size: 14px;
            }
            .trash-item {
                padding: 8px !important;
                min-height: 80px;
            }
            .trash-item .text-3xl {
                font-size: 1.5rem !important;
            }
            .trash-item .text-sm {
                font-size: 0.75rem !important;
            }
            .bin {
                padding: 12px !important;
                min-height: 100px !important;
            }
            .bin .text-3xl {
                font-size: 1.8rem !important;
            }
            .bin .text-lg {
                font-size: 0.9rem !important;
            }
            .bin .text-sm {
                font-size: 0.7rem !important;
            }
        }
        
        /* Touch-friendly interactions */
        .trash-item {
            touch-action: none;
            user-select: none;
        }
        
        .trash-item.touching {
            transform: scale(1.1);
            z-index: 1000;
            opacity: 0.8;
        }
        .dragging {
            transform: rotate(5deg);
            z-index: 1000;
        }
        .bin-highlight {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        .correct-drop {
            animation: bounce 0.5s ease-in-out;
        }
        .wrong-drop {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .star-effect {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: starSparkle 1s ease-out forwards;
        }
        @keyframes starSparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }
        .firework {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }
        .firework-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
        .error-effect {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            color: red;
            font-size: 2rem;
            font-weight: bold;
            animation: errorPulse 0.8s ease-out forwards;
        }
        @keyframes errorPulse {
            0% { transform: scale(0); opacity: 1; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
        .game-over-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-green-100 min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-4 md:mb-8">
            <h1 class="text-2xl md:text-4xl font-bold text-gray-800 mb-2">üóÇÔ∏è ‡πÄ‡∏Å‡∏°‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ñ‡∏±‡∏á</h1>
            <p class="text-sm md:text-lg text-gray-600">‡∏•‡∏≤‡∏Å‡∏Ç‡∏¢‡∏∞‡πÑ‡∏õ‡∏ó‡∏¥‡πâ‡∏á‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!</p>
            <div class="mt-4 grid grid-cols-2 md:flex md:justify-center md:items-center gap-2 md:gap-4">
                <div class="bg-white px-2 md:px-4 py-1 md:py-2 rounded-lg shadow">
                    <span class="text-sm md:text-lg font-semibold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: </span>
                    <span id="score" class="text-lg md:text-2xl font-bold text-green-600">0</span>
                </div>
                <div class="bg-white px-2 md:px-4 py-1 md:py-2 rounded-lg shadow">
                    <span class="text-sm md:text-lg font-semibold">‡∏ú‡∏¥‡∏î: </span>
                    <span id="mistakes" class="text-lg md:text-2xl font-bold text-red-600">0</span>
                </div>
                <div class="bg-white px-2 md:px-4 py-1 md:py-2 rounded-lg shadow">
                    <span class="text-sm md:text-lg font-semibold">‡∏î‡∏≤‡∏ß: </span>
                    <span id="stars" class="text-lg md:text-2xl font-bold text-yellow-500">0</span>
                </div>
                <div class="bg-white px-2 md:px-4 py-1 md:py-2 rounded-lg shadow">
                    <span class="text-sm md:text-lg font-semibold">‡πÄ‡∏ß‡∏•‡∏≤: </span>
                    <span id="timer" class="text-lg md:text-2xl font-bold text-blue-600">45</span>
                </div>
            </div>
        </div>

        <!-- Bins -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-4 md:mb-8">
            <div class="bin bg-blue-500 hover:bg-blue-600 transition-all duration-300 rounded-lg p-3 md:p-4 text-center text-white font-bold shadow-lg min-h-24 md:min-h-32 flex flex-col items-center justify-center" 
                 data-type="general">
                <div class="text-2xl md:text-3xl mb-1 md:mb-2">üóëÔ∏è</div>
                <div class="text-sm md:text-lg">‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
                <div class="text-xs md:text-sm opacity-80">(‡∏ü‡πâ‡∏≤)</div>
            </div>
            <div class="bin bg-green-500 hover:bg-green-600 transition-all duration-300 rounded-lg p-3 md:p-4 text-center text-white font-bold shadow-lg min-h-24 md:min-h-32 flex flex-col items-center justify-center" 
                 data-type="organic">
                <div class="text-2xl md:text-3xl mb-1 md:mb-2">ü•¨</div>
                <div class="text-sm md:text-lg">‡∏Ç‡∏¢‡∏∞‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å</div>
                <div class="text-xs md:text-sm opacity-80">(‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)</div>
            </div>
            <div class="bin bg-yellow-500 hover:bg-yellow-600 transition-all duration-300 rounded-lg p-3 md:p-4 text-center text-white font-bold shadow-lg min-h-24 md:min-h-32 flex flex-col items-center justify-center" 
                 data-type="recyclable">
                <div class="text-2xl md:text-3xl mb-1 md:mb-2">‚ôªÔ∏è</div>
                <div class="text-sm md:text-lg">‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</div>
                <div class="text-xs md:text-sm opacity-80">(‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á)</div>
            </div>
            <div class="bin bg-red-500 hover:bg-red-600 transition-all duration-300 rounded-lg p-3 md:p-4 text-center text-white font-bold shadow-lg min-h-24 md:min-h-32 flex flex-col items-center justify-center" 
                 data-type="hazardous">
                <div class="text-2xl md:text-3xl mb-1 md:mb-2">‚ö†Ô∏è</div>
                <div class="text-sm md:text-lg">‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</div>
                <div class="text-xs md:text-sm opacity-80">(‡πÅ‡∏î‡∏á)</div>
            </div>
        </div>

        <!-- Trash Items -->
        <div class="bg-white rounded-lg p-3 md:p-6 shadow-lg">
            <h2 class="text-lg md:text-2xl font-bold text-gray-800 mb-3 md:mb-4 text-center">‡∏•‡∏≤‡∏Å‡∏Ç‡∏¢‡∏∞‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ñ‡∏±‡∏á</h2>
            <div id="trashArea" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 md:gap-4 min-h-32 md:min-h-40">
                <!-- Trash items will be generated here -->
            </div>
            <div class="text-center mt-3 md:mt-4">
                <button id="newGameBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 md:px-6 rounded-lg transition-colors text-sm md:text-base">
                    ‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="mt-4 md:mt-6 bg-white rounded-lg p-3 md:p-4 shadow">
            <h3 class="font-bold text-base md:text-lg mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô:</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-xs md:text-sm">
                <div>
                    <span class="font-semibold text-blue-600">üóëÔ∏è ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏ü‡πâ‡∏≤):</span> ‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å, ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏¥‡∏ä‡∏ä‡∏π‡πà, ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ
                </div>
                <div>
                    <span class="font-semibold text-green-600">ü•¨ ‡∏Ç‡∏¢‡∏∞‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß):</span> ‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏ú‡∏•‡πÑ‡∏°‡πâ, ‡πÉ‡∏ö‡πÑ‡∏°‡πâ
                </div>
                <div>
                    <span class="font-semibold text-yellow-600">‚ôªÔ∏è ‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á):</span> ‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß, ‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á, ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©
                </div>
                <div>
                    <span class="font-semibold text-red-600">‚ö†Ô∏è ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ (‡πÅ‡∏î‡∏á):</span> ‡∏ñ‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏â‡∏≤‡∏¢, ‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü, ‡∏¢‡∏≤
                </div>
            </div>
        </div>
    </div>

    <script>
        const trashItems = [
            // ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (general)
            { emoji: 'üõçÔ∏è', name: '‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å', type: 'general' },
            { emoji: 'üßª', name: '‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏¥‡∏ä‡∏ä‡∏π‡πà', type: 'general' },
            { emoji: 'üçø', name: '‡∏ñ‡∏∏‡∏á‡∏õ‡πä‡∏≠‡∏õ‡∏Ñ‡∏≠‡∏£‡πå‡∏ô', type: 'general' },
            { emoji: 'üéà', name: '‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á', type: 'general' },
            { emoji: 'üßΩ', name: '‡∏ü‡∏≠‡∏á‡∏ô‡πâ‡∏≥', type: 'general' },
            { emoji: 'ü™í', name: '‡πÉ‡∏ö‡∏°‡∏µ‡∏î‡πÇ‡∏Å‡∏ô', type: 'general' },
            { emoji: 'üé≠', name: '‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å', type: 'general' },
            { emoji: 'üß∏', name: '‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤‡πÄ‡∏Å‡πà‡∏≤', type: 'general' },
            { emoji: 'üëü', name: '‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤', type: 'general' },
            { emoji: 'üé™', name: '‡∏ú‡πâ‡∏≤‡πÉ‡∏ö‡πÄ‡∏Å‡πà‡∏≤', type: 'general' },
            { emoji: 'üß§', name: '‡∏ñ‡∏∏‡∏á‡∏°‡∏∑‡∏≠‡∏¢‡∏≤‡∏á', type: 'general' },
            { emoji: 'üéØ', name: '‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å', type: 'general' },
            
            // ‡∏Ç‡∏¢‡∏∞‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å (organic)
            { emoji: 'üçå', name: '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡πâ‡∏ß‡∏¢', type: 'organic' },
            { emoji: 'üçé', name: '‡πÅ‡∏Å‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•', type: 'organic' },
            { emoji: 'ü•ï', name: '‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å', type: 'organic' },
            { emoji: 'üçä', name: '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πâ‡∏°', type: 'organic' },
            { emoji: 'ü•¨', name: '‡∏ú‡∏±‡∏Å‡πÄ‡∏Å‡πà‡∏≤', type: 'organic' },
            { emoji: 'üçá', name: '‡∏≠‡∏á‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢', type: 'organic' },
            { emoji: 'ü•í', name: '‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡πÄ‡∏Å‡πà‡∏≤', type: 'organic' },
            { emoji: 'üçÖ', name: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡πÄ‡∏™‡∏µ‡∏¢', type: 'organic' },
            { emoji: 'üåΩ', name: '‡∏ã‡∏±‡∏á‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î', type: 'organic' },
            { emoji: 'ü•î', name: '‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏Å‡πà‡∏≤', type: 'organic' },
            { emoji: 'üçÑ', name: '‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏Å‡πà‡∏≤', type: 'organic' },
            { emoji: 'ü•ñ', name: '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏Å‡πà‡∏≤', type: 'organic' },
            { emoji: 'üçö', name: '‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠', type: 'organic' },
            
            // ‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• (recyclable)
            { emoji: 'ü•§', name: '‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥', type: 'recyclable' },
            { emoji: 'üóûÔ∏è', name: '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå', type: 'recyclable' },
            { emoji: 'ü•´', name: '‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£', type: 'recyclable' },
            { emoji: 'üì∞', name: '‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©', type: 'recyclable' },
            { emoji: 'üì¶', name: '‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©', type: 'recyclable' },
            { emoji: 'üç∫', name: '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß', type: 'recyclable' },
            { emoji: 'ü•õ', name: '‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ô‡∏°', type: 'recyclable' },
            { emoji: 'üìÑ', name: '‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤', type: 'recyclable' },
            { emoji: 'üìö', name: '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏Å‡πà‡∏≤', type: 'recyclable' },
            { emoji: 'üóÇÔ∏è', name: '‡πÅ‡∏ü‡πâ‡∏°‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£', type: 'recyclable' },
            { emoji: 'üìã', name: '‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î', type: 'recyclable' },
            { emoji: 'üéÅ', name: '‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç', type: 'recyclable' },
            { emoji: 'üßÉ', name: '‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ', type: 'recyclable' },
            
            // ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ (hazardous)
            { emoji: 'üîã', name: '‡∏ñ‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏â‡∏≤‡∏¢', type: 'hazardous' },
            { emoji: 'üí°', name: '‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü', type: 'hazardous' },
            { emoji: 'üíä', name: '‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏', type: 'hazardous' },
            { emoji: 'üß™', name: '‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ', type: 'hazardous' },
            { emoji: 'üé®', name: '‡∏™‡∏µ‡πÄ‡∏Å‡πà‡∏≤', type: 'hazardous' },
            { emoji: 'üîß', name: '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á', type: 'hazardous' },
            { emoji: 'üß¥', name: '‡∏Ç‡∏ß‡∏î‡∏¢‡∏≤‡∏Ü‡πà‡∏≤‡πÅ‡∏°‡∏•‡∏á', type: 'hazardous' },
            { emoji: 'üå°Ô∏è', name: '‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå', type: 'hazardous' },
            { emoji: 'üíª', name: '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå', type: 'hazardous' },
            { emoji: 'üì±', name: '‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏Å‡πà‡∏≤', type: 'hazardous' },
            { emoji: 'üîå', name: '‡∏™‡∏≤‡∏¢‡πÑ‡∏ü‡πÄ‡∏Å‡πà‡∏≤', type: 'hazardous' },
            { emoji: '‚ö°', name: '‡∏≠‡∏∞‡πÅ‡∏î‡∏õ‡πÄ‡∏ï‡∏≠‡∏£‡πå', type: 'hazardous' }
        ];

        let score = 0;
        let mistakes = 0;
        let stars = 0;
        let currentTrash = [];
        let timeLeft = 45;
        let gameTimer = null;
        let gameActive = false;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function startTimer() {
            gameActive = true;
            gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            
            // Calculate final stars
            let finalStars = Math.floor(score / 50);
            if (mistakes === 0 && score > 0) finalStars += 2;
            else if (mistakes <= 2) finalStars += 1;
            
            showGameOverModal(score, mistakes, finalStars);
            createFireworks();
        }

        function createStarEffect(x, y) {
            const star = document.createElement('div');
            star.className = 'star-effect';
            star.innerHTML = '‚≠ê';
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            star.style.fontSize = '2rem';
            document.body.appendChild(star);
            
            setTimeout(() => {
                star.remove();
            }, 1000);
        }

        function createErrorEffect(x, y) {
            const error = document.createElement('div');
            error.className = 'error-effect';
            error.innerHTML = '‚ùå';
            error.style.left = x + 'px';
            error.style.top = y + 'px';
            document.body.appendChild(error);
            
            setTimeout(() => {
                error.remove();
            }, 800);
        }

        function createFireworks() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7'];
            
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = Math.random() * window.innerWidth + 'px';
                    firework.style.top = Math.random() * window.innerHeight / 2 + 'px';
                    
                    for (let j = 0; j < 12; j++) {
                        const particle = document.createElement('div');
                        particle.className = 'firework-particle';
                        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        
                        const angle = (j * 30) * Math.PI / 180;
                        const distance = 50 + Math.random() * 50;
                        particle.style.left = Math.cos(angle) * distance + 'px';
                        particle.style.top = Math.sin(angle) * distance + 'px';
                        
                        firework.appendChild(particle);
                    }
                    
                    document.body.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 1000);
                }, i * 200);
            }
        }

        function showGameOverModal(finalScore, finalMistakes, finalStars) {
            const modal = document.createElement('div');
            modal.className = 'game-over-modal';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 text-center max-w-md mx-4">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">üéâ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß!</h2>
                    <div class="space-y-3 mb-6">
                        <div class="text-xl">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span class="font-bold text-green-600">${finalScore}</span></div>
                        <div class="text-xl">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: <span class="font-bold text-red-600">${finalMistakes}</span></div>
                        <div class="text-xl">‡∏î‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ: <span class="font-bold text-yellow-500">${finalStars} ‚≠ê</span></div>
                    </div>
                    <button onclick="closeModal()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg">
                        ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeModal() {
            const modal = document.querySelector('.game-over-modal');
            if (modal) modal.remove();
            resetGame();
        }

        function generateTrash() {
            const trashArea = document.getElementById('trashArea');
            trashArea.innerHTML = '';
            
            // Select 8 random items from all 48 items
            currentTrash = shuffleArray(trashItems).slice(0, 8);
            
            currentTrash.forEach((item, index) => {
                const trashElement = document.createElement('div');
                trashElement.className = 'trash-item bg-gray-100 hover:bg-gray-200 rounded-lg p-2 md:p-4 text-center cursor-move transition-all duration-200 border-2 border-gray-300';
                trashElement.draggable = true;
                trashElement.dataset.type = item.type;
                trashElement.dataset.index = index;
                trashElement.innerHTML = `
                    <div class="text-2xl md:text-3xl mb-1 md:mb-2">${item.emoji}</div>
                    <div class="text-xs md:text-sm font-medium text-gray-700">${item.name}</div>
                `;
                
                // Drag events
                trashElement.addEventListener('dragstart', handleDragStart);
                trashElement.addEventListener('dragend', handleDragEnd);
                
                // Touch events for mobile
                trashElement.addEventListener('touchstart', handleTouchStart, { passive: false });
                trashElement.addEventListener('touchmove', handleTouchMove, { passive: false });
                trashElement.addEventListener('touchend', handleTouchEnd, { passive: false });
                
                trashArea.appendChild(trashElement);
            });
            
            // Start timer if not already started
            if (!gameActive) {
                startTimer();
            }
        }

        function resetGame() {
            score = 0;
            mistakes = 0;
            stars = 0;
            timeLeft = 45;
            gameActive = false;
            clearInterval(gameTimer);
            
            document.getElementById('score').textContent = score;
            document.getElementById('mistakes').textContent = mistakes;
            document.getElementById('stars').textContent = stars;
            document.getElementById('timer').textContent = timeLeft;
            
            generateTrash();
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.type);
            e.dataTransfer.setData('index', e.target.dataset.index);
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            document.querySelectorAll('.bin').forEach(bin => {
                bin.classList.remove('bin-highlight');
            });
        }

        // Touch handling for mobile devices
        let touchItem = null;
        let touchOffset = { x: 0, y: 0 };

        function handleTouchStart(e) {
            e.preventDefault();
            touchItem = e.target.closest('.trash-item');
            if (touchItem) {
                touchItem.classList.add('touching');
                const touch = e.touches[0];
                const rect = touchItem.getBoundingClientRect();
                touchOffset.x = touch.clientX - rect.left;
                touchOffset.y = touch.clientY - rect.top;
            }
        }

        function handleTouchMove(e) {
            e.preventDefault();
            if (!touchItem) return;
            
            const touch = e.touches[0];
            touchItem.style.position = 'fixed';
            touchItem.style.left = (touch.clientX - touchOffset.x) + 'px';
            touchItem.style.top = (touch.clientY - touchOffset.y) + 'px';
            touchItem.style.zIndex = '1000';
            
            // Highlight bins when dragging over them
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const bin = elementBelow?.closest('.bin');
            
            document.querySelectorAll('.bin').forEach(b => b.classList.remove('bin-highlight'));
            if (bin) {
                bin.classList.add('bin-highlight');
            }
        }

        function handleTouchEnd(e) {
            e.preventDefault();
            if (!touchItem) return;
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const bin = elementBelow?.closest('.bin');
            
            // Reset item position and style
            touchItem.style.position = '';
            touchItem.style.left = '';
            touchItem.style.top = '';
            touchItem.style.zIndex = '';
            touchItem.classList.remove('touching');
            
            document.querySelectorAll('.bin').forEach(b => b.classList.remove('bin-highlight'));
            
            if (bin && gameActive) {
                const trashType = touchItem.dataset.type;
                const trashIndex = touchItem.dataset.index;
                const binType = bin.dataset.type;
                
                const binRect = bin.getBoundingClientRect();
                const centerX = binRect.left + binRect.width / 2;
                const centerY = binRect.top + binRect.height / 2;
                
                if (trashType === binType) {
                    // Correct!
                    score += 10;
                    stars = Math.floor(score / 50);
                    document.getElementById('score').textContent = score;
                    document.getElementById('stars').textContent = stars;
                    
                    bin.classList.add('correct-drop');
                    touchItem.style.opacity = '0.3';
                    touchItem.draggable = false;
                    touchItem.style.pointerEvents = 'none';
                    
                    // Create star effect
                    createStarEffect(centerX - 16, centerY - 16);
                    
                    setTimeout(() => {
                        bin.classList.remove('correct-drop');
                    }, 500);
                    
                    // Check if all trash is sorted
                    const remainingTrash = document.querySelectorAll('.trash-item[draggable="true"]');
                    if (remainingTrash.length === 0) {
                        setTimeout(() => {
                            generateTrash(); // Generate new trash automatically
                        }, 1000);
                    }
                } else {
                    // Wrong!
                    mistakes++;
                    document.getElementById('mistakes').textContent = mistakes;
                    bin.classList.add('wrong-drop');
                    
                    // Create error effect
                    createErrorEffect(centerX - 16, centerY - 16);
                    
                    setTimeout(() => {
                        bin.classList.remove('wrong-drop');
                    }, 500);
                }
            }
            
            touchItem = null;
        }

        // Setup bins
        document.querySelectorAll('.bin').forEach(bin => {
            bin.addEventListener('dragover', (e) => {
                e.preventDefault();
                if (gameActive) {
                    bin.classList.add('bin-highlight');
                }
            });
            
            bin.addEventListener('dragleave', (e) => {
                bin.classList.remove('bin-highlight');
            });
            
            bin.addEventListener('drop', (e) => {
                e.preventDefault();
                bin.classList.remove('bin-highlight');
                
                if (!gameActive) return;
                
                const trashType = e.dataTransfer.getData('text/plain');
                const trashIndex = e.dataTransfer.getData('index');
                const binType = bin.dataset.type;
                
                const trashElement = document.querySelector(`[data-index="${trashIndex}"]`);
                const binRect = bin.getBoundingClientRect();
                const centerX = binRect.left + binRect.width / 2;
                const centerY = binRect.top + binRect.height / 2;
                
                if (trashType === binType) {
                    // Correct!
                    score += 10;
                    stars = Math.floor(score / 50);
                    document.getElementById('score').textContent = score;
                    document.getElementById('stars').textContent = stars;
                    
                    bin.classList.add('correct-drop');
                    trashElement.style.opacity = '0.3';
                    trashElement.draggable = false;
                    trashElement.style.pointerEvents = 'none';
                    
                    // Create star effect
                    createStarEffect(centerX - 16, centerY - 16);
                    
                    setTimeout(() => {
                        bin.classList.remove('correct-drop');
                    }, 500);
                    
                    // Check if all trash is sorted
                    const remainingTrash = document.querySelectorAll('.trash-item[draggable="true"]');
                    if (remainingTrash.length === 0) {
                        setTimeout(() => {
                            generateTrash(); // Generate new trash automatically
                        }, 1000);
                    }
                } else {
                    // Wrong!
                    mistakes++;
                    document.getElementById('mistakes').textContent = mistakes;
                    bin.classList.add('wrong-drop');
                    
                    // Create error effect
                    createErrorEffect(centerX - 16, centerY - 16);
                    
                    setTimeout(() => {
                        bin.classList.remove('wrong-drop');
                    }, 500);
                }
            });
        });

        // New game button
        document.getElementById('newGameBtn').addEventListener('click', () => {
            resetGame();
        });

        // Initialize game
        generateTrash();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a807cf47c47336',t:'MTc1NzA5OTQ2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
